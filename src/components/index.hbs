<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./GCWeb/assets/favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="stylesheet" href="./GCWeb/css/theme.min.css" />
    <noscript
      ><link rel="stylesheet" href="./GCWeb/wet-boew/css/noscript.min.css"
    /></noscript>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.4/dist/esri-leaflet.js"
    integrity="sha512-oUArlxr7VpoY7f/dd3ZdUL7FGOvS79nXVVQhxlg6ij4Fhdc4QID43LUFRs7abwHNJ0EYWijiN5LP2ZRR2PY4hQ=="
    crossorigin=""></script>
    <script src= "/src/data.EnbridgeUSMainline.js"></script>
    <title>Line 9 Interactive Map Prototype</title>
    <style>
      body {
        font-size: 20px;
        line-height: 1.65em;
      html,
      body,
      #map {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        max-height: 700px !important;
      }
      #map-panel-body {
        height: 88%;
        padding: 0px !important;
        position: relative;
      }
      #map-panel-heading {
        .header-footer-percent {
          height: 6%;
        }
      }
      #map-panel-heading {
        position: relative;
      }
      #map-panel-footing {
        height: 6%;
        width: 100%;
        /* position: relative; */
        display: flex;
        flex-wrap: wrap;
        flex-flow: row wrap;
        align-items: center;
        padding-top: 0px;
        padding-bottom: 0px;
        position: relative;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1>Pipeline Profile Section</h1>
          <p class="small">Updated November 2021</p>
        </div>
      </div>
      <div class="div.col-md-9.col-sm-12"></div>
      <section class = "panel panel-default" id="map-panel" dbHeight = 700>
        <header class="panel-heading">
          <h5 class="panel-title" id="leaflet-map-title">
            Line 9 Interactive Map
          </h5>
        </header>
        <div id="map"style="height: 678px; position: relative;" tabindex="0">
          <script>
          // Initialize map
            var map = L.map("map", { center: [44, -78], zoom: 6 });

            // add basemap
            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}", {
            foo: "bar",
            attribution:
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            }).addTo(map);

            // add aboriginal lands of Canada (NRCan) https://www.arcgis.com/home/item.html?id=8b9ff056f5144a788fc6d85f72c86c15
            var indigenousLands = L.esri.featureLayer({
              url: 'https://proxyinternet.nrcan.gc.ca/arcgis/rest/services/CLSS-SATC/CLSS_Administrative_Boundaries/MapServer/0'
            }).addTo(map);

            indigenousLands.setStyle({
            color: '#8c8c96'
          });

            // add crude oil pipelines from EIA
            var crudeOilPipelinesEIA = L.esri.featureLayer({
              url:'https://services7.arcgis.com/FGr1D95XCGALKXqM/ArcGIS/rest/services/CrudeOil_Pipelines_US_EIA/FeatureServer/0',
              where: "Pipename = 'Portland Pipeline'"
            }).addTo(map);

            crudeOilPipelinesEIA.setStyle({
            color: '#871455'
          });

            // add Line 9
            var pipelineSystemCER = L.esri.featureLayer({
              url:'https://services5.arcgis.com/vNzamREXvX2WcX6d/ArcGIS/rest/services/PIPELINE_PROFILE_LAYER_VIEW/FeatureServer/2'
            }).addTo(map);

            pipelineSystemCER.setStyle({
            color: '#FF821E'
          });

            // U.S. Mainline
            var usMainline = {
              "type" : "FeatureCollection",
              "crs" : {
                "type" : "name",
                "properties" : {
                  "name" : "EPSG:3857"
                }
              },
              "features" : [
                {
                  "type" : "Feature",
                  "id" : 5,
                  "geometry" : {
                    "type" : "LineString",
                    "coordinates" : [
                      [
                        -10857195.524900001,
                        6274859.6194999963
                      ],
                      [
                        -10700337.9892,
                        6103884.0429999977
                      ],
                      [
                        -10621346.737400001,
                        6058018.6986000016
                      ],
                      [
                        -10593983.199999999,
                        6048120.8300999999
                      ],
                      [
                        -10545209.7371,
                        6007108.2221999988
                      ],
                      [
                        -10421582.7773,
                        5995286.5345999971
                      ],
                      [
                        -10365173.4275,
                        5957470.8382999972
                      ],
                      [
                        -10302669.1467,
                        5892171.6856999993
                      ],
                      [
                        -10268282.2106,
                        5879091.7719999999
                      ],
                      [
                        -10248928.097200001,
                        5891734.6005999967
                      ]
                    ]
                  },
                  "properties" : {
                    "objectid" : 5,
                    "opername" : "ENBRIDGE",
                    "pipename" : "Lakehead",
                    "shape_leng" : 6.1270592600000002,
                    "SHAPE__Length" : 758596.30296444218
                  }
                },
                {
                  "type" : "Feature",
                  "id" : 6,
                  "geometry" : {
                    "type" : "LineString",
                    "coordinates" : [
                      [
                        -10248928.104699999,
                        5890443.6969000027
                      ],
                      [
                        -9872432.4943000004,
                        5301324.2041999996
                      ],
                      [
                        -9837397.2478999998,
                        5097169.5803000033
                      ],
                      [
                        -9739547.4136999995,
                        5106834.7417000011
                      ]
                    ]
                  },
                  "properties" : {
                    "objectid" : 6,
                    "opername" : "ENBRIDGE",
                    "pipename" : "Lakehead",
                    "shape_leng" : 7.3267260500000004,
                    "SHAPE__Length" : 1004615.0479363285
                  }
                },
                {
                  "type" : "Feature",
                  "id" : 7,
                  "geometry" : {
                    "type" : "LineString",
                    "coordinates" : [
                      [
                        -10248928.097200001,
                        5891734.6005999967
                      ],
                      [
                        -9868808.5221999995,
                        5301324.2866000012
                      ],
                      [
                        -9833773.2434999999,
                        5097169.5786999986
                      ],
                      [
                        -9797798.8895999994,
                        5100711.9588000029
                      ],
                      [
                        -9735923.4434999991,
                        5106834.7606000006
                      ]
                    ]
                  },
                  "properties" : {
                    "objectid" : 7,
                    "opername" : "ENBRIDGE",
                    "pipename" : "Lakehead",
                    "shape_leng" : 7.3544646499999997,
                    "SHAPE__Length" : 1007658.2649456594
                  }
                },
                {
                  "type" : "Feature",
                  "id" : 8,
                  "geometry" : {
                    "type" : "MultiLineString",
                    "coordinates" : [
                      [
                        [
                          -9181840.3311000001,
                          5291897.2761000022
                        ],
                        [
                          -9236712.8979000002,
                          5337785.6208999977
                        ],
                        [
                          -9314477.4044000003,
                          5377623.6062999964
                        ],
                        [
                          -9328735.1336000003,
                          5395182.9940000027
                        ],
                        [
                          -9347143.6062000003,
                          5397520.2317999974
                        ],
                        [
                          -9355897.6492999997,
                          5448990.6406999975
                        ],
                        [
                          -9379834.4769000001,
                          5554044.3737000003
                        ],
                        [
                          -9431749.9499999993,
                          5745139.4692000002
                        ]
                      ],
                      [
                        [
                          -9435395.0026999991,
                          5758556.5040000007
                        ],
                        [
                          -9438136.6842999998,
                          5768648.3295999989
                        ],
                        [
                          -9497388.2876999993,
                          5809983.6481000036
                        ],
                        [
                          -9632423.7163999993,
                          5772775.1103999987
                        ],
                        [
                          -9695803.8452000003,
                          5779662.9060000032
                        ],
                        [
                          -9872167.6414000001,
                          5805841.7906000018
                        ],
                        [
                          -10026491.097100001,
                          5858201.2158999965
                        ],
                        [
                          -10241225.170700001,
                          5890573.3496000022
                        ]
                      ],
                      [
                        [
                          -10241925.2541,
                          5890678.8902999982
                        ],
                        [
                          -10248928.097200001,
                          5891734.6005999967
                        ]
                      ]
                    ]
                  },
                  "properties" : {
                    "objectid" : 8,
                    "opername" : "ENBRIDGE",
                    "pipename" : "Lakehead",
                    "shape_leng" : 11.59141421,
                    "SHAPE__Length" : 1410085.4998773006
                  }
                },
                {
                  "type" : "Feature",
                  "id" : 9,
                  "geometry" : {
                    "type" : "LineString",
                    "coordinates" : [
                      [
                        -9182746.3538000006,
                        5294742.7545000017
                      ],
                      [
                        -9275225.7568999995,
                        5287538.7863999978
                      ],
                      [
                        -9321006.9088000003,
                        5262960.6787
                      ],
                      [
                        -9377500.8225999996,
                        5242292.9447999969
                      ],
                      [
                        -9459463.2928999998,
                        5201046.5684999973
                      ],
                      [
                        -9534846.4539000001,
                        5170642.9971000031
                      ],
                      [
                        -9600895.5370000005,
                        5132286.4355000034
                      ],
                      [
                        -9691658.2404999994,
                        5092101.1303000003
                      ],
                      [
                        -9741454.6337000001,
                        5102009.9694000036
                      ]
                    ]
                  },
                  "properties" : {
                    "objectid" : 9,
                    "opername" : "ENBRIDGE",
                    "pipename" : "Lakehead",
                    "shape_leng" : 5.2493438799999996,
                    "SHAPE__Length" : 604328.29453922191
                  }
                },
                {
                  "type" : "Feature",
                  "id" : 16,
                  "geometry" : {
                    "type" : "LineString",
                    "coordinates" : [
                      [
                        -10240309.612500001,
                        5874670.695600003
                      ],
                      [
                        -9878540.9383000005,
                        5302520.6420999989
                      ],
                      [
                        -9886200.2556999996,
                        5150983.7594999969
                      ],
                      [
                        -9867971.148,
                        5005045.4821000025
                      ],
                      [
                        -9735283.1088999994,
                        5081441.4469999969
                      ],
                      [
                        -9741454.6337000001,
                        5102009.9694000036
                      ]
                    ]
                  },
                  "properties" : {
                    "objectid" : 16,
                    "opername" : "ENBRIDGE",
                    "pipename" : "Southern Access",
                    "shape_leng" : 8.3365418800000004,
                    "SHAPE__Length" : 1150314.9908812277
                  }
                }
              ]
            }
            L.geoJSON(usMainline).addTo(map);




            // Create Pop Up
            indigenousLands.bindPopup(function (layer) {
            return L.Util.template('<b>{adminAreaNameEng}</b>', layer.feature.properties);
            });
            crudeOilPipelinesEIA.bindPopup(function (layer) {
            return L.Util.template('<b>{Pipename}, {Opername}</b>', layer.feature.properties);
            });
          </script>
        </div>
    </div>
    </section>
  </body>
</html>
